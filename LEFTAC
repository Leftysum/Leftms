-- Variables and existing code
local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local VirtualInput = game:GetService("VirtualInputManager")

local killAuraOn = false
local auraRange = 15  -- Default range

-- Create the main GUI elements
local gui = Instance.new("ScreenGui")
gui.Name = "LEFTAC"
gui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 500)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundTransparency = 0.5
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
mainFrame.Parent = gui

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 50, 0, 30)
closeButton.Position = UDim2.new(1, -50, 0, 0)
closeButton.Text = "Close"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
closeButton.Parent = mainFrame
closeButton.MouseButton1Click:Connect(function()
    gui.Enabled = false  -- Close the GUI when clicked
end)

local openButton = Instance.new("TextButton")
openButton.Size = UDim2.new(0, 50, 0, 30)
openButton.Position = UDim2.new(1, -50, 0, 40)
openButton.Text = "Open"
openButton.TextColor3 = Color3.fromRGB(255, 255, 255)
openButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
openButton.Parent = gui
openButton.MouseButton1Click:Connect(function()
    gui.Enabled = true  -- Open the GUI when clicked
end)

-- Create a toggle button for Kill Aura
local killAuraButton = Instance.new("TextButton")
killAuraButton.Size = UDim2.new(0, 250, 0, 50)
killAuraButton.Position = UDim2.new(0, 25, 0, 70)
killAuraButton.Text = "Kill Aura: OFF"
killAuraButton.TextColor3 = Color3.fromRGB(255, 255, 255)
killAuraButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
killAuraButton.Parent = mainFrame

killAuraButton.MouseButton1Click:Connect(function()
    killAuraOn = not killAuraOn
    killAuraButton.Text = killAuraOn and "Kill Aura: ON" or "Kill Aura: OFF"
end)

-- Create a label to display the Aura Range
local rangeDisplay = Instance.new("TextLabel")
rangeDisplay.Size = UDim2.new(0, 250, 0, 50)
rangeDisplay.Position = UDim2.new(0, 25, 0, 130)
rangeDisplay.Text = "Aura Range: " .. auraRange
rangeDisplay.TextColor3 = Color3.fromRGB(255, 255, 255)
rangeDisplay.BackgroundTransparency = 1
rangeDisplay.Font = Enum.Font.SourceSansBold
rangeDisplay.TextSize = 14
rangeDisplay.Parent = mainFrame

-- Create buttons to adjust the range
local rangePlusButton = Instance.new("TextButton")
rangePlusButton.Size = UDim2.new(0, 100, 0, 30)
rangePlusButton.Position = UDim2.new(0, 25, 0, 200)
rangePlusButton.Text = "Range +"
rangePlusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
rangePlusButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
rangePlusButton.Parent = mainFrame

local rangeMinusButton = Instance.new("TextButton")
rangeMinusButton.Size = UDim2.new(0, 100, 0, 30)
rangeMinusButton.Position = UDim2.new(0, 150, 0, 200)
rangeMinusButton.Text = "Range -"
rangeMinusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
rangeMinusButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
rangeMinusButton.Parent = mainFrame

rangePlusButton.MouseButton1Click:Connect(function()
    auraRange = math.clamp(auraRange + 1, 1, 18)
    rangeDisplay.Text = "Aura Range: " .. auraRange
end)

rangeMinusButton.MouseButton1Click:Connect(function()
    auraRange = math.clamp(auraRange - 1, 1, 18)
    rangeDisplay.Text = "Aura Range: " .. auraRange
end)

-- Kill Aura Functionality with proper range
task.spawn(function()
    while true do
        if killAuraOn and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = lp.Character.HumanoidRootPart
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= lp and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local target = player.Character
                    local targetHRP = target:FindFirstChild("HumanoidRootPart")
                    if targetHRP then
                        local dist = (targetHRP.Position - hrp.Position).Magnitude
                        if dist <= auraRange and target:FindFirstChild("Humanoid") and target.Humanoid.Health > 0 then
                            -- Attack the target if within range
                            local cam = workspace.CurrentCamera
                            local screenPos, onScreen = cam:WorldToViewportPoint(targetHRP.Position)
                            if onScreen then
                                -- Send input to attack the target if within range and on screen
                                local x = screenPos.X / cam.ViewportSize.X
                                local y = screenPos.Y / cam.ViewportSize.Y
                                VirtualInput:SendTouchEvent(1, 0, x, y)
                                VirtualInput:SendTouchEvent(1, 2, x, y)
                            end
                        end
                    end
                end
            end
        end
        task.wait(0.1)
    end
end)

-- Ensure the GUI starts closed
gui.Enabled = false  -- Start with the GUI closed
